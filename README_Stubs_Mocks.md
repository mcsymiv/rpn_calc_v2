# rpn_calc_v2

Test DOUBLES (stub, mock)

Это объекты, которые создаются и используются взамен реальных объектов, 
с которым взаимодействует тестируемый объект в процессе своей работы.

Stub

Stubs - обеспечивают жестко зашитый ответ на вызовы во время тестирования. 
Применяются для замены тех объектов, которые обеспечивают SUT входными данными. 
Также они могут сохранять в себе информацию о вызове (например параметры или 
количество этих вызовов) - такие иногда называют своим термином Test Spy. 
Такая "запись" позволяет оценить работу SUT, если состояние самого SUT не меняется.

Проверяет правильную работоспособность тестируемого объекта 
заключается в оценке состояния самого этого объекта, 
а также взаимодействующих объектов, после вызова этого метода.

Жизненный цикл with stubs:
1. Initialize - Подготовьте тестируемый объект и его коллабораторы.
2. Exercise - проверьте функциональность.
3. Verify state - использовать утверждения для проверки состояния объекта.
4. Teardown - очистка ресурсов.

Mock

Mocks - объекты, которые настраиваются (например специфично каждому тесту) 
и позволяют задать ожидания в виде своего рода спецификации вызовов, которые 
мы планируем получить. Проверки соответствия ожиданиям проводятся через 
вызовы к Mock-объекту.

Проверяет набор и порядок действий (вызовов методов взаимодействующих 
объектов, других методов тестируемого объекта), которое должен совершить 
метод этот объект.

Test Жизненный цикл with mocks:
1. Initialize - Подготовить объект к тестированию.
1. Setup expectations & data - Подготовить ожидания в mock, который используется тестируемым объектом (SUT).
2. Exercise - Test the functionality. Тестировать функциональность
3. Verify expectations & state - Верификация, того что правильный метод был вызван в mock, использовать Assert для проверки состояния объекта.
4. Teardown - Очистка ресурсов

Stub vs Mock

Cтаб ничего не проверяет, а лишь имитирует заданное состояние. 
А мок — это объект, у которого есть ожидания. 
Например, что данный метод класса должен быть вызван \nопределенное число раз.

Тест никогда не сломается из-за стаба, а вот из-за мока может.

С технической точки зрения это значит, что, используя стабы, 
мы проверяем состояние тестируемого класса или результат выполненного метода. 
При использовании мока мы проверяем, соответствуют ли ожидания мока 
поведению тестируемого класса. Также лучше использовать не более одного мока на тест. 
Иначе с высокой вероятностью вы нарушите принцип «тестировать только одну вещь». 

И моки, и заглушки дают ответ на вопрос: каков результат?
Mock также интересуется: Как был достигнут результат?

mocks = stubs + ожидания и проверки

*System Under Test - SUT
